name: dev_java_advanced
cases:
  - id: spring_boot_rest_controller
    requires_model: true
    prompt: "Create a Spring Boot @RestController with GET /api/health returning {\"status\":\"ok\"} and a main application class."
    expect_regex:
      - "```java"
      - "@RestController"
      - "@GetMapping\\(\\s*\"/api/health\"\\s*\\)"
      - "public\\s+static\\s+void\\s+main\\("
      - "SpringApplication\\.run\\("
  - id: java_records_and_optional
    requires_model: true
    prompt: "Use a Java record User(String name, String email) and a method Optional<User> findByName(String name)."
    expect_regex:
      - "record\\s+User\\("
      - "Optional<\\s*User\\s*>"
      - "findByName\\("
  - id: junit5_param_tests
    requires_model: true
    prompt: "Provide a JUnit 5 parameterized test using @ParameterizedTest and @CsvSource for an add(a,b)=sum method."
    expect_regex:
      - "@ParameterizedTest"
      - "@CsvSource"
      - "assertEquals"
  - id: httpclient_modern
    requires_model: true
    prompt: "Use Java 11 HttpClient to GET a JSON endpoint with timeout and handle exceptions."
    expect_regex:
      - "HttpClient\\.newHttpClient\\("
      - "HttpRequest\\.newBuilder\\("
      - "send\\("
      - "Duration\\.ofSeconds\\("

