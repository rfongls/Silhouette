name: dev_cpp_runtime
cases:
  - id: cpp_add_test
    requires_model: true
    requires_runtime: true
    runtime: docker
    image: gcc:14
    prompt: |
      Create a CMake project with add.cpp and test.cpp using Catch2.
      ```file: CMakeLists.txt
      ```cmake
      cmake_minimum_required(VERSION 3.15)
      project(AddTest LANGUAGES CXX)
      set(CMAKE_CXX_STANDARD 17)
      add_executable(add add.cpp test.cpp)
      target_link_libraries(add Catch2::Catch2WithMain)
      find_package(Catch2 3 REQUIRED)
      enable_testing()
      add_test(NAME AddTest COMMAND add)
      ```
      ```file: add.cpp
      ```cpp
      int add(int a,int b){return a+b;}
      ```
      ```file: test.cpp
      ```cpp
      #include <catch2/catch_test_macros.hpp>
      int add(int,int);
      TEST_CASE("add 3+4=7","[add]"){ REQUIRE(add(3,4)==7); }
      ```
    expect_files: [CMakeLists.txt, add.cpp, test.cpp]
    commands:
      - apt-get update && apt-get install -y cmake pkg-config libcatch2-dev
      - cmake -S . -B build
      - cmake --build build
      - ctest --test-dir build --output-on-failure
    expect_stdout_regex: ["100% tests passed"]
