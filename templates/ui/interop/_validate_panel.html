{% set root = request.scope.get('root_path', '') %}
<section id="validate-panel" class="panel interop-panel interop-panel-validate">
  <form id="validate-form"
        method="post"
        action="{{ urls.ui_validate | default(root ~ '/ui/interop/validate', true) }}"
        hx-post="{{ urls.api_validate | default(root ~ '/api/interop/validate', true) }}"
        hx-target="#validate-report"
        hx-swap="innerHTML"
        hx-headers='{"Accept":"text/html"}'
        hx-on::afterSwap="window.InteropUI.onValidateComplete(event)">
    <textarea class="input textarea-output" id="val-text" name="message" placeholder="Paste HL7 to validate"></textarea>
    <div class="row gap mt">
      <input class="input" type="text" name="profile" placeholder="profile/workbook (optional)" />
      <button class="btn" type="submit" data-action="validate">Validate</button>
    </div>
  </form>
  <div class="form-row mt">
    <button class="btn btn-secondary btn-sm" id="print-validate-report" type="button">Print report</button>
  </div>
  <div id="validate-report" class="mt">
    <p class="muted">Run validation to see a report.</p>
  </div>
</section>
