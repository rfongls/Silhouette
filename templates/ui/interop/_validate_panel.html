{% set root = request.scope.get('root_path', '') %}
<section id="validate-panel" class="interop-panel interop-panel-validate card">
  <div class="module-body">
    <h3 class="text-h3 mb">Validate</h3>
    <form id="validate-form"
          hx-post="{{ urls.api_validate_view | default(root ~ '/api/interop/validate/view', true) }}"
          hx-encoding="multipart/form-data"
          hx-target="#validate-output"
          hx-swap="innerHTML"
          hx-on::afterSwap="window.InteropUI.onValidateComplete(event)">
      <label>HL7 Message (paste)
        <textarea class="input" name="message" rows="7" placeholder="MSH|^~\&|..."></textarea>
      </label>
      <div class="row gap mt">
        <label>Validation Template
          <input class="input" name="profile_id" placeholder="template id (optional)" />
        </label>
        <label>Or upload .hl7
          <input class="input" type="file" name="file" accept=".hl7,.txt" />
        </label>
        <button class="btn" type="submit">Run Validate</button>
      </div>
    </form>
    <div id="validate-output" class="mt"></div>
  </div>
</section>
