{% extends "layout.html" %}
{% block content %}
{% set root = request.scope.get('root_path', '') %}
{% set reports_acks_url = link_for(request, 'ui_reports_acks', '/reports/acks') %}
<section class="dashboard">
  <div class="dashboard-container">
    <header class="dashboard-header">
      <h1 class="text-h1">Home</h1>
      <p class="text-body">Manage your skills and view reports across all modules</p>
    </header>

    <section class="quick-launch">
      <h2 class="text-h2">Select a Skill</h2>
      <p class="text-body muted">Quick launch the tools you need.</p>
      <div class="quick-launch-grid">
        <select class="quick-select" id="skill-select">
          <option value="cybersecurity">Cyber Security</option>
          <option value="interoperability">Interoperability</option>
        </select>
        <a class="btn btn-primary" href="#" id="quick-open">Open Skill</a>
      </div>
    </section>
    <section class="skills-overview" hidden>
      <h2 class="text-h2">Available Skills</h2>
      <div class="skills-grid">
        <div class="skill-card" data-skill="interoperability">
          <div class="skill-card-header">
            <div class="skill-icon"><div class="skill-icon-svg">üîó</div></div>
            <div>
              <h3 class="skill-title">Interoperability</h3>
              <p class="skill-description">HL7 ‚Üí FHIR pipeline tools</p>
            </div>
          </div>
          <div class="skill-card-actions">
            <a class="btn btn-secondary btn-sm" href="{{ root }}/ui/interop/dashboard">View Details</a>
            <a class="btn btn-primary btn-sm" href="{{ root }}/ui/interop/skills">Open Skill</a>
          </div>
        </div>
        <div class="skill-card" data-skill="cybersecurity">
          <div class="skill-card-header">
            <div class="skill-icon"><div class="skill-icon-svg">üõ°Ô∏è</div></div>
            <div>
              <h3 class="skill-title">Cyber Security</h3>
              <p class="skill-description">Threat, vuln, and compliance tooling</p>
            </div>
          </div>
          <div class="skill-card-actions">
            <a class="btn btn-secondary btn-sm" href="{{ root }}/ui/security/dashboard">View Details</a>
            <a class="btn btn-primary btn-sm" href="{{ root }}/ui/security/dashboard">Open Skill</a>
          </div>
        </div>
      </div>
    </section>
    <section class="reports-section">
      <div class="reports-grid">
        <div class="report-card card">
          <h3 class="text-h3">Recent activity</h3>
          <p class="text-body">Latest actions and results across skills.</p>
        </div>
        <div class="report-card card">
          <h3 class="text-h3">Alerts &amp; Issues</h3>
          <p class="text-body">Open items requiring attention.</p>
        </div>
        <div class="report-card card">
          <h3 class="text-h3">Trends</h3>
          <p class="text-body">High‚Äëlevel patterns and volumes.</p>
        </div>
        <div class="report-card card">
          <h3 class="text-h3">Reporting</h3>
          <p class="text-body">Deep dive into ACKs, latency, and validations.</p>
          <div class="mt">
            <a class="btn btn-secondary btn-sm" href="{{ reports_acks_url }}">View Reports</a>
          </div>
        </div>
      </div>
    </section>
  </div>
</section>
<script>
  document.getElementById('quick-open')?.addEventListener('click', (e) => {
    e.preventDefault();
    const v = document.getElementById('skill-select').value;
    const rootPath = document.body?.dataset?.root || '';
    const target = (v === 'cybersecurity') ? rootPath + '/ui/security/dashboard' : rootPath + '/ui/interop/skills';
    window.location.href = target;
  });
</script>
{% endblock %}
