{% extends "layout.html" %}
{% block content %}
<style>
.modal-root { position: fixed; inset: 0; z-index: 1000; }
.modal-backdrop { position: absolute; inset: 0; background: rgba(0, 0, 0, 0.2); backdrop-filter: blur(1px); }
.modal { position: absolute; inset: 0; display: grid; place-items: center; padding: 1.5rem; }
.modal-card { background: #fff; border-radius: 1rem; padding: 1.25rem 1.5rem; min-width: 720px; max-width: 90vw; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); }
.modal-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem; }
</style>
<h1 class="text-h1">Validation Template â€” {{ tpl.name }}</h1>
<div class="row gap">
  <a class="button" href="{{ request.url_for('ui_settings_val_export_json', name=tpl.name) }}">Export JSON</a>
  <a class="button" href="{{ request.url_for('ui_settings_val_export_csv', name=tpl.name) }}">Export CSV</a>
  <form class="row gap small" hx-post="{{ request.url_for('ui_settings_val_import_csv', name=tpl.name) }}" hx-target="#val-checks">
    <input type="file" name="file" accept=".csv" required />
    <button class="button">Import CSV</button>
  </form>
</div>
<div class="card mt">
  <h2 class="text-h2">Checks</h2>
  <div class="row mb">
    <button
      class="button"
      hx-get="{{ request.url_for('ui_settings_val_new_check_modal', name=tpl.name) }}"
      hx-target="body"
      hx-swap="beforeend"
    >Add Check</button>
  </div>

  <div id="val-checks">
    {% include "ui/settings/_val_checks_table.html" %}
  </div>
</div>
{% endblock %}
