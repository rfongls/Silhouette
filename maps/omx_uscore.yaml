messageTypes:
  # General order messages beyond ORM, mapping to ServiceRequest
  - "OMD^O03"
  - "OMG^O19"
  - "OML^O21"
  - "OMN^O07"
  - "OMP^O09"
  - "OMS^O05"
#
# These order messages follow a structure similar to ORM^O01 with ORC and OBR
# segments.  We map them to FHIR ServiceRequest resources using the same
# rules defined for the ORM mapping.
resourcePlan:
  - resource: ServiceRequest
    profile: "http://hl7.org/fhir/us/core/StructureDefinition/us-core-servicerequest"
    rules:
      - hl7_path: "-"
        fhir_path: "intent"
        transform: "default_servicerequest_intent"
      - hl7_path: "ORC.1"
        fhir_path: "status"
        transform: "orc_control_to_status"
      - hl7_path: "ORC.2"
        fhir_path: "identifier[]"
        transform: "cx_to_identifier"
      - hl7_path: "ORC.3"
        fhir_path: "identifier[]"
        transform: "cx_to_identifier"
      - hl7_path: "OBR.4"
        fhir_path: "code"
        transform: "obx_cwe_to_codeableconcept"
      - hl7_path: "OBR.7"
        fhir_path: "authoredOn"
        transform: "ts_to_datetime"
      - hl7_path: "ORC.12"
        fhir_path: "requester"
        transform: "xcn_to_reference"
      - hl7_path: "OBR.16"
        fhir_path: "performer[0].actor"
        transform: "xcn_to_reference"
      - hl7_path: "OBR.31"
        fhir_path: "reasonCode[0]"
        transform: "obx_cwe_to_codeableconcept"
      - hl7_path: "PID.3"
        fhir_path: "subject.identifier"
        transform: "cx_to_identifier"
      - hl7_path: "PV1.19"
        fhir_path: "encounter.identifier"
        transform: "cx_to_identifier"