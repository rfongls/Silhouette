messageTypes:
  # Additional ADT events not explicitly covered by existing mappings
  - "ADT^A04"
  - "ADT^A05"
  - "ADT^A06"
  - "ADT^A07"
  - "ADT^A09"
  - "ADT^A10"
  - "ADT^A12"
  - "ADT^A14"
  - "ADT^A15"
  - "ADT^A16"
  - "ADT^A17"
  - "ADT^A18"
  - "ADT^A20"
  - "ADT^A21"
  - "ADT^A22"
  - "ADT^A23"
  - "ADT^A24"
  - "ADT^A25"
  - "ADT^A26"
  - "ADT^A27"
  - "ADT^A28"
  - "ADT^A29"
  - "ADT^A30"
  - "ADT^A31"
  - "ADT^A32"
  - "ADT^A33"
  - "ADT^A34"
  - "ADT^A35"
  - "ADT^A36"
  - "ADT^A37"
  - "ADT^A38"
  - "ADT^A39"
  - "ADT^A41"
  - "ADT^A42"
  - "ADT^A43"
  - "ADT^A44"
  - "ADT^A45"
  - "ADT^A46"
  - "ADT^A47"
  - "ADT^A48"
  - "ADT^A49"
  - "ADT^A50"
  - "ADT^A51"
  - "ADT^A52"
  - "ADT^A53"
  - "ADT^A54"
  - "ADT^A55"
  - "ADT^A60"
  - "ADT^A61"
  - "ADT^A62"
#
# This file maps all remaining ADT trigger events to the same FHIR
# resource plan used for ADT^A01.  These events cover a wide range
# of administrative scenarios (registration, preâ€‘admission, merges, etc.).
# While some events (e.g., merges) require more sophisticated handling
# (such as FHIR Person and $merge operations), this mapping at least
# produces Patient and Encounter resources along with optional Condition,
# AllergyIntolerance and Procedure resources when DG1, AL1 and PR1
# segments are present.  Device and Provenance resources are added
# automatically by the pipeline.
resourcePlan:
  - resource: Patient
    profile: "http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient"
    rules:
      - hl7_path: "PID.3[0]"
        fhir_path: "identifier[]"
        transform: "pid3_to_identifiers"
      - hl7_path: "PID.5[0]"
        fhir_path: "name[]"
        transform: "name_family_given"
      - hl7_path: "PID.8"
        fhir_path: "gender"
        transform: "sex_to_gender"
      - hl7_path: "PID.7"
        fhir_path: "birthDate"
        transform: "ts_to_date"
  - resource: Encounter
    profile: "http://hl7.org/fhir/us/core/StructureDefinition/us-core-encounter"
    rules:
      - hl7_path: "PV1.2"
        fhir_path: "class"
        transform: "pv1_class_to_code"
      - hl7_path: "PV1.44"
        fhir_path: "period.start"
        transform: "ts_to_date"
      - hl7_path: "PV1.45"
        fhir_path: "period.end"
        transform: "ts_to_date"
  # Include optional Condition from DG1 segments
  - resource: Condition
    profile: "http://hl7.org/fhir/us/core/StructureDefinition/us-core-condition"
    rules:
      - hl7_path: "DG1.3"
        fhir_path: "code"
        transform: "dg1_to_codeableconcept"
      - hl7_path: "DG1.5"
        fhir_path: "onsetDateTime"
        transform: "ts_to_datetime"
      - hl7_path: "PID.3"
        fhir_path: "subject.identifier"
        transform: "cx_to_identifier"
      - hl7_path: "-"
        fhir_path: "clinicalStatus"
        transform: "default_condition_clinical_status"
      - hl7_path: "-"
        fhir_path: "verificationStatus"
        transform: "default_condition_verification_status"
  # Include optional AllergyIntolerance from AL1 segments
  - resource: AllergyIntolerance
    profile: "http://hl7.org/fhir/us/core/StructureDefinition/us-core-allergyintolerance"
    rules:
      - hl7_path: "AL1.3"
        fhir_path: "code"
        transform: "al1_to_codeableconcept"
      - hl7_path: "AL1.6"
        fhir_path: "onsetDateTime"
        transform: "ts_to_datetime"
      - hl7_path: "PID.3"
        fhir_path: "patient.identifier"
        transform: "cx_to_identifier"
      - hl7_path: "AL1.6"
        fhir_path: "reaction[0].manifestation[0].text"
      - hl7_path: "-"
        fhir_path: "clinicalStatus"
        transform: "default_allergy_clinical_status"
      - hl7_path: "-"
        fhir_path: "verificationStatus"
        transform: "default_allergy_verification_status"
  # Include optional Procedure from PR1 segments
  - resource: Procedure
    profile: "http://hl7.org/fhir/us/core/StructureDefinition/us-core-procedure"
    rules:
      - hl7_path: "PR1.3"
        fhir_path: "code"
        transform: "obx_cwe_to_codeableconcept"
      - hl7_path: "PR1.5"
        fhir_path: "performedDateTime"
        transform: "ts_to_datetime"
      - hl7_path: "PID.3"
        fhir_path: "subject.identifier"
        transform: "cx_to_identifier"
      - hl7_path: "-"
        fhir_path: "status"
        transform: "default_procedure_status"